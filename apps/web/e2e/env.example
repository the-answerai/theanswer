# ============================================================
# E2E TEST CONFIGURATION
# ============================================================
# This file contains test-specific configuration.
# Values here should NEVER be used in development or production.
#
# Test Database Security:
#   - NODE_ENV=test triggers automatic test_ prefix enforcement
#   - See packages/server/src/DataSource.ts::ensureTestPrefix()
#   - See docs/TEST_DATABASE_SECURITY.md for security details
#
# Usage:
#   1. Copy this file to .env.test in apps/web directory
#   2. Fill in your test user credentials
#   3. Ensure backend server runs with NODE_ENV=test and test database credentials
#
# ============================================================

# Shared test user password (used by all test users)
TEST_USER_PASSWORD=your-secure-test-password

# Test User Email Addresses for role-based testing
# Enterprise client users (custom domain orgs) - these are the primary test users
TEST_USER_ENTERPRISE_ADMIN_EMAIL=alpha+enterprise-admin@domain.ai
TEST_USER_ENTERPRISE_BUILDER_EMAIL=alpha+enterprise-builder@domain.ai
TEST_USER_ENTERPRISE_MEMBER_EMAIL=alpha+enterprise-member@domain.ai

# OPTIONAL: Auth0 User IDs for each test user (auto-generated from email if not provided)
# TEST_USER_ENTERPRISE_ADMIN_AUTH0_ID=auth0|your-admin-user-id
# TEST_USER_ENTERPRISE_BUILDER_AUTH0_ID=auth0|your-builder-user-id
# TEST_USER_ENTERPRISE_MEMBER_AUTH0_ID=auth0|your-member-user-id

# Organization configuration for enterprise tests
# Organization ID for Auth0 organization selection (use actual org ID from Auth0)
# Example IDs from the HTML: org_unQ8OLmTNsxVTJCT (Local Dev), org_Ha7MW1NJ5oRRHwUa (Public)
TEST_ENTERPRISE_AUTH0_ORG_ID=org_unQ8OLmTNsxVTJCT
# Organization display name (used for UI verification)
TEST_ENTERPRISE_ORG_NAME=Local Dev

# Base URL for testing (optional - defaults to http://localhost:3000)
BASE_URL=http://localhost:3000

# Enable test endpoints in development mode (required for E2E testing)
ENABLE_E2E_ENDPOINTS=true

# Auth0 configuration (these should match your development environment)
AUTH0_SECRET=your-auth0-secret
AUTH0_ISSUER_BASE_URL=https://your-domain.auth0.com
AUTH0_BASE_URL=http://localhost:3000
AUTH0_CLIENT_ID=your-auth0-client-id
AUTH0_CLIENT_SECRET=your-auth0-client-secret

# Auth0 Management API (for creating/managing test users)
AUTH0_MANAGEMENT_DOMAIN=your-domain.auth0.com
AUTH0_MANAGEMENT_CLIENT_ID=your-mgmt-api-client-id
AUTH0_MANAGEMENT_CLIENT_SECRET=your-mgmt-api-client-secret
AUTH0_MANAGEMENT_AUDIENCE=https://your-domain.auth0.com/api/v2/

# Database Configuration (Test Mode)
# IMPORTANT: These are TEST DEFAULTS - automatically prefixed with test_ when NODE_ENV=test
# The DataSource implementation ensures safe database isolation during testing
NODE_ENV=test
DATABASE_TYPE=postgres
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_NAME=test_flowise_e2e    # Auto-prefixed by DataSource when NODE_ENV=test
DATABASE_USER=test_user            # Auto-prefixed by DataSource when NODE_ENV=test
DATABASE_PASSWORD=test_password
DATABASE_URL=postgresql://test_user:test_password@localhost:5432/test_flowise_e2e

# Admin API Key (for test user management)
ADMIN_API_KEY=your-admin-api-key-for-tests

# External Service Configuration (use test/mock endpoints)
OPENAI_API_KEY=test-key-or-mock
STRIPE_SECRET_KEY=sk_test_your-test-key
STRIPE_PUBLISHABLE_KEY=pk_test_your-test-key

# Test Credentials for Database Seeding
# These are used when seeding test scenarios with specific credentials
TEST_OPENAI_API_KEY=sk-test-openai-key-for-e2e
TEST_EXASEARCH_API_KEY=test-exa-search-key-for-e2e
TEST_JIRA_ACCESS_TOKEN=test-jira-token-for-e2e
TEST_JIRA_USERNAME=jira-bot@example.com
TEST_JIRA_HOST=https://example.atlassian.net
TEST_CONFLUENCE_ACCESS_TOKEN=test-confluence-token-for-e2e
TEST_CONFLUENCE_USERNAME=confluence-bot@example.com
TEST_CONFLUENCE_BASE_URL=https://example.atlassian.net/wiki
TEST_GITHUB_API_TOKEN=test-github-token-for-e2e
TEST_SLACK_BOT_TOKEN=xoxb-test-slack-bot-token

# Test configuration flags
DISABLE_EXTERNAL_APIS=true
MOCK_AI_RESPONSES=true
MOCK_BILLING=true
